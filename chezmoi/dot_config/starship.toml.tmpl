{{- $data := include (joinPath .chezmoi.homeDir ".config/chezmoi/chezmoidata.json") | fromJson -}}
# Starship Prompt Configuration
# Managed by chezmoi - Stylix colors

format = """
$username\
$hostname\
$directory\
$git_branch\
$git_state\
$git_status\
$git_metrics\
$cmd_duration\
$python\
$nix_shell\
$line_break\
$character"""

[username]
style_user = "bold {{ $data.stylix.base0D }}"
style_root = "bold {{ $data.stylix.base08 }}"
format = "[$user]($style) "
show_always = false

[hostname]
style = "bold {{ $data.stylix.base0E }}"
format = "[@$hostname]($style) "
ssh_only = true

[directory]
style = "bold {{ $data.stylix.base0C }}"
format = "[$path]($style)[$read_only]($read_only_style) "
truncation_length = 3
truncate_to_repo = true
read_only = " 󰌾"
read_only_style = "{{ $data.stylix.base08 }}"

[git_branch]
style = "bold {{ $data.stylix.base0B }}"
format = "[$symbol$branch]($style) "
symbol = " "

[git_status]
style = "bold {{ $data.stylix.base08 }}"
format = '([$all_status$ahead_behind]($style) )'
conflicted = "="
ahead = "⇡${count}"
behind = "⇣${count}"
diverged = "⇕⇡${ahead_count}⇣${behind_count}"
untracked = "?${count}"
stashed = "$${count}"
modified = "!${count}"
staged = "+${count}"
renamed = "»${count}"
deleted = "✘${count}"

[git_state]
style = "bold {{ $data.stylix.base0A }}"
format = '\([$state( $progress_current/$progress_total)]($style)\) '

[git_metrics]
disabled = false
added_style = "bold {{ $data.stylix.base0B }}"
deleted_style = "bold {{ $data.stylix.base08 }}"
format = '([+$added]($added_style) )([-$deleted]($deleted_style) )'

[cmd_duration]
style = "bold {{ $data.stylix.base0A }}"
format = "[$duration]($style) "
min_time = 2000
show_milliseconds = false

[python]
style = "bold {{ $data.stylix.base0A }}"
format = '[(\($virtualenv\))]($style) '
detect_folders = [".venv", "venv"]

[nix_shell]
style = "bold {{ $data.stylix.base0D }}"
format = '[❄️ $state(\($name\))]($style) '
impure_msg = ""
pure_msg = "pure"
heuristic = true

[character]
success_symbol = "[❯](bold {{ $data.stylix.base0E }})"
error_symbol = "[❯](bold {{ $data.stylix.base08 }})"
vimcmd_symbol = "[❮](bold {{ $data.stylix.base0B }})"

[aws]
disabled = true

[gcloud]
disabled = true

[kubernetes]
disabled = true

[docker_context]
disabled = true
